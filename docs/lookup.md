# 2. Preparing a lookup.csv file

Create a lookup.csv to be used in prepare.py. The prepare.py script uses
the lookup.csv file to determine which subjects and sessions will be
uploaded.  The following documentation subsections cover each column's
format in detail. 

The lookup.csv contains metadata about all of the subjects included in
the collection. The lookup.csv file must exist and reside in the upload
folder.  It has six columns and N+1 rows where N is the number of
subject and session pairs. The first row MUST be a header row with the
exact keys:

`bids_subject,
bids_session,subjectkey,src_subject_id,interview_date,interview_age,sex`

On each row, every column should hold the information for that row's
bids_subject_session in a specific way.  Read on for the exact
specifications.

To see an example of how we do this for the ABCC, see Appendix: Links
for more information.

**bids_subject_session**

This follows the formatting below.

**`sub-<SUBJECT>[_ses-<SESSION>]`**

Where:

-   `<SUBJECT>` needs to be replaced by your actual BIDS-standard subject label

-   `<SESSION>` should be used if you have multiple sessions for single subjects within a dataset.  When in use, `<SESSION>` needs to be replaced by your actual BIDS-standard session label.  The square brackets around `[_ses-<SESSION>]` imply this block is optional.

**Remember: BIDS labels (`<SUBJECT>` and `<SESSION>`) are ONLY alphanumeric. Spaces, underscores, hyphens, and any other separators are NOT ALLOWED. To be explicit, there are no - (hyphens) or \_ (underscores) allowed in the subject or session IDs.**

**subjectkey**

This is generated by the [NDA GUID tool](https://nda.nih.gov/nda/nda-tools.html#guid-tool) and always starts with NDAR. It is a globally unique identifier for the subject. If you are not the one that uploaded the data to the NDA originally, this should be in the NDA manifest text file.

**src_subject_id**

This is the subject ID that was used by the lab or project. 
Alphanumeric-only formatting is recommended, though not strictly
necessary, for src_subject_id.

**interview_date**

The date on which the interview/genetic
test/sampling/imaging/biospecimen was completed. It MUST be in the
format **`MM/DD/YYYY`**. Using either the correct acquisition dates or
\"masked dates\" (anonymized to the first of the acquisition month) for
the **interview_date** must be decided upon based on any relevant IRB
restrictions.

**interview_age**

The age in months of the subject at the time of the interview_date. This
value MUST always be an integer.

**sex**

The sex of the subject. There are four values accepted by the NDA at the
time of this writing (January 2022):

-   `M` = Male

-   `F` = Female

-   `O` = Other

-   `NR` = Not Reported
